<section data-ng-controller="TreesController" data-ng-init="findOne()">
    <div keypress-events></div>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="collapse navbar-collapse navbar-right navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="#!/">Home</a>
                    </li>
                    <li ng-show="loggedIn"><a href="#!/trees">Trees</a>
                    </li>
                    <li ng-show="loggedIn"><a href="#!/" ng-click="signout()">Sign Out</a></li>
                </ul>
            </div>
        </div>
    </nav>    
    <div class="content-section-b">
        <div class="container">
            <div class="row">
                <div class="col-md-3" id="leftCol">
                    <div id="sidebar">
                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a on-click="highlight('PERSON')" class="btn btn-default PERSON" role="button"><strong>PER: c</strong><br></a>
                            <a on-click="highlight('NORP')" class="btn btn-default NORP" role="button"><strong>NORP: d</strong><br></a>
                        </div>
                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a on-click="highlight('FAC')" class="btn btn-default FAC" role="button"><strong>FAC: s</strong><br></a>
                            <a on-click="highlight('ORG')" class="btn btn-default ORG" role="button"><strong>ORG: z</strong><br></a>
                        </div>
                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a on-click="highlight('GPE')" class="btn btn-default GPE" role="button"><strong>GPE: a</strong><br></a>
                            <a on-click="highlight('LOC')" class="btn btn-default LOC" role="button"><strong>LOC: x</strong><br></a>
                        </div>
                        
                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a on-click="highlight('PRODUCT')" class="btn btn-default PRODUCT" role="button"><strong>PROD: f</strong><br></a>
                            <a on-click="highlight('EVENT')" class="btn btn-default EVENT" role="button"><strong>EVENT: q</strong><br></a>
                        </div>

                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a on-click="highlight('WORK_OF_ART')" class="btn btn-default WORK_OF_ART" role="button"><strong>ART: w</strong><br></a>
                            <a on-click="highlight('LAW')" class="btn btn-default LAW" role="button"><strong>LAW: e</strong><br></a>
                        </div>
                        
                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a on-click="highlight('LANGUAGE')" class="btn btn-default LANGUAGE" role="button"><strong>LANG: r</strong><br></a>
                            <a on-click="highlight('DATE')" class="btn btn-default DATE" role="button"><strong>DATE</strong><br></a>
                        </div>
                        
                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a on-click="highlight('TIME')" class="btn btn-default TIME" role="button"><strong>TIME</strong><br></a>
                            <a on-click="highlight('PERCENT')" class="btn btn-default PERCENT" role="button"><strong>PERCENT</strong><br></a>
                        </div>
                        
                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a on-click="highlight('MONEY')" class="btn btn-default MONEY" role="button"><strong>MONEY</strong><br></a>
                            <a on-click="highlight('QUANTITY')" class="btn btn-default QUANTITY" role="button"><strong>QUANTITY</strong><br></a>
                        </div>

                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a on-click="highlight('ORDINAL')" class="btn btn-default ORDINAL" role="button"><strong>ORDINAL</strong><br></a>
                            <a on-click="highlight('CARDINAL')" class="btn btn-default CARDINAL" role="button"><strong>CARDINAL</strong><br></a>
                        </div>

                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a on-click="highlight('MISC')" class="btn btn-default MISC" role="button"><strong>MISC</strong><br></a>
                            <a on-click="removeTag()" class="btn btn-default" role="button"><strong>Remove: v</strong><br></a>
                        </div>

                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a ng-click="annotateNer()" class="btn btn-default" role="button"><strong>Annotate</strong><br></a>
                            <a ng-click="saveAnnotation()" class="btn btn-default" role="button"><strong>Save</strong><br></a>
                        </div>
                        <div class="btn-group btn-group-lg btn-group-justified btn-group-fill-height">
                            <a ng-click="enableKeypress()" class="btn btn-default" role="button"><strong>Enable</strong><br></a>
                            <a ng-click="disableKeypress()" class="btn btn-default" role="button"><strong>Disable</strong><br></a>
                        </div>
                    </div>
                </div>
                <div class="col-md-9" id="mainCol">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row"</div>
                                <h1 data-ng-bind="tree.title"></h1>
                                <small>
                                    <em>Posted on</em>
                                    <em data-ng-bind="tree.created | date:'mediumDate'"></em> <em>by</em>
                                    <em data-ng-bind="tree.creator.fullName"></em>
                                </small><br><br>
                            </div>
                            <div class="row">
                                <a data-target="#edit" data-toggle="modal" class="btn btn-default btn-lg"><i class="fa fa-pencil-square-o fa-fw"></i><span class="network-name"> Edit</span></a>   
                                <a onclick="exportCanvas()" class="btn btn-default btn-lg"><i class="fa fa-floppy-o fa-fw"></i><span class="network-name"> Export</span></a>
                                <a href="#" data-ng-click="delete();" class="btn btn-default btn-lg"><i class="fa fa-trash-o fa-fw"></i><span class="network-name"> Delete</span></a>
                                <a onclick="clickBackward()" class="btn btn-default btn-lg"><i class="fa fa-step-backward fa-fw"></i></a>
                                <a onclick="clickPrevious()" class="btn btn-default btn-lg"><i class="fa fa-backward fa-fw"></i></a>
                                <a onclick="clickNext()" class="btn btn-default btn-lg"><i class="fa fa-forward fa-fw"></i></a>
                                <a onclick="clickForward()" class="btn btn-default btn-lg"><i class="fa fa-step-forward fa-fw"></i></a>
                                <a data-target="#help" data-toggle="modal" class="btn btn-default btn-lg"><i class="fa fa-question-circle fa-fw"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="row top-buffer">
                        <div class="col-md-12">
                            <table>
                                <td style="vertical-align:top;text-align:center;">
                                    <input id="rg_deptree" type="range" width="100" min="1" max="4" step="0.2" value="1" onchange="selectTreeID()" oninput="changeZoom(this.value)"><br>
                                </td>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12" id="buttons">
                            <a href="https://github.com/clir/clearnlp-guidelines/blob/master/md/dependency/dependency_guidelines.md">Dependency Guidelines</a> | 
                            <a href="http://www.mathcs.emory.edu/~choi/doc/clear-dependency-2012.pdf">Clear Dependency Paper</a>
                            <h3>Named Entity Annotator</h3>
                            <p>Make a selection in the document and use the buttons below or use the respective keybindings to annotate and save the named entities.</p>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-12" id="annotation">
                            <div annotation-display tree="{{tree}}" contenteditable="true"</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12"> 
                        <div id="css_deptree_canvas">
                            <canvas id="cv_deptree" height="500"></canvas>
                        </div>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-12"> 
                        Sentence index: <select id="st_treeId" onchange="selectTreeID();"></select>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="help" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title"><i class="fa fa-question-circle fa-fw"></i>Help</h4>
                    </div>
                    <div class="modal-body">
                        <i class="fa fa-trash-o fa-fw"></i>: Deletes Tree<br><br>
                        <i class="fa fa-floppy-o fa-fw"></i>: Export diagram as picture<br><br>
                        <i class="fa fa-step-backward fa-fw"></i>: Jumps to first sentence<br><br>
                        <i class="fa fa-backward fa-fw"></i>: Jumps to previous sentence<br><br>
                        <i class="fa fa-forward fa-fw"></i>: Jumps to next sentence<br><br>
                        <i class="fa fa-step-forward fa-fw"></i>: Jumps to last sentence<br><br>
                        <table>
                            <td style="vertical-align:top;text-align:center;">
                                <input id="rg_deptree" type="range" width="100" min="1" max="4" step="0.2" value="1">
                            </td>
                            <td style="vertical-align:top;text-align:center;"
                        </td>
                    </table>
                    Zoom Bar: Enlarge diagram to desired size<br><br>
                    Annotations can be made by highlighting words/phrases in sentence
                </div>
            </div>
        </div>
    </div><br><br>

    <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title"><i class="fa fa-pencil-square-o fa-fw"></i> Edit Tree</h4>
                </div>
                <div class="modal-body">
                    <form data-ng-submit="update()" novalidate>
                        <div class="form-group">
                            <label for="title">Title</label>
                            <div>
                                <input type="text" ng-model="tree.title" class="form-control" id="title">
                            </div>
                        </div><br>
                        <div class="form-group">
                            <label for="content">Content</label>
                            <div>
                                <textarea ng-model="tree.content" class="form-control" id="content" cols="30" rows="10"></textarea>
                            </div>
                        </div><br>
                        <div class="form-group">
                            <button type="submit" class="btn btn-default">Apply Update</button>
                            <button type="submit" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                        <div data-ng-show="error">
                            <strong data-ng-bind="error"></strong>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
